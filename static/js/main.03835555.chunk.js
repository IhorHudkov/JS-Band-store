(this["webpackJsonpjs-band-store"]=this["webpackJsonpjs-band-store"]||[]).push([[0],{21:function(e,t,c){},28:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c(22),s=c(4),a=c(2),i=c(8),o=c(16),j=c.p+"static/media/logo.5c2e1559.png",l=c.p+"static/media/cart.010d5d26.png",u=(c(28),c(0));var b=function(){var e=Object(n.useRef)(null),t=Object(a.g)();return Object(n.useEffect)((function(){e.current.onclick=function(){localStorage.removeItem("token"),t.push("./login")}}),[]),Object(u.jsxs)("header",{className:"header",children:[Object(u.jsx)("div",{className:"header__top",children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"header__top-inner",children:[Object(u.jsx)("span",{id:"currentUserName"}),Object(u.jsx)("button",{type:"button",ref:e,children:"sign out"})]})})}),Object(u.jsx)("div",{className:"header__bottom",children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"header__bottom-inner",children:[Object(u.jsx)(s.b,{to:"/catalog",children:Object(u.jsx)("img",{src:j,height:"80px",alt:"logo"})}),Object(u.jsx)(s.b,{to:"/cart",children:Object(u.jsx)("img",{src:l,height:"30px",alt:"cart"})})]})})})]})};c(38);var d=function(){return Object(u.jsx)("footer",{className:"footer",children:Object(u.jsxs)("p",{children:["Made with ",Object(u.jsx)("span",{style:{color:"#e25555"},children:"\u2665"})," by",Object(u.jsx)("a",{href:"https://www.linkedin.com/in/igor-gudkov/",children:"Ihor Hudkov"})]})})};var h=function(e){var t=e.component,c=Object(o.a)(e,["component"]);return Object(u.jsx)(a.b,Object(i.a)(Object(i.a)({},c),{},{render:function(e){return localStorage.getItem("token")?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(b,{}),Object(u.jsx)("main",{children:Object(u.jsx)("div",{className:"container",children:Object(u.jsx)(t,Object(i.a)({},e))})}),Object(u.jsx)(d,{})]}):Object(u.jsx)(a.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};var O=function(e){var t=e.component,c=Object(o.a)(e,["component"]);return Object(u.jsx)(a.b,Object(i.a)(Object(i.a)({},c),{},{render:function(e){return localStorage.getItem("token")?Object(u.jsx)(a.a,{to:{pathname:"/catalog",state:{from:e.location}}}):Object(u.jsx)(t,Object(i.a)({},e))}}))},x=c(11),p=(c(39),c.p+"static/media/man.ad811078.svg"),m=c(14),f=c(15),v=function(){function e(t){if(Object(m.a)(this,e),e.exists)return e.instance;e.instance=this,e.exists=!0,this._name=t}return Object(f.a)(e,[{key:"name",get:function(){return this._name}},{key:"avatar",get:function(){return this._avatar},set:function(e){this._avatar=e}},{key:"token",get:function(){return this._token},set:function(e){this._token=e}}]),e}(),g=c(9),k=c.n(g),_=c(13),N=new(function(){function e(){if(Object(m.a)(this,e),e.exists)return e.instance;e.exists=!0,e.instance=this,this.url="https://js-band-store-api.glitch.me"}return Object(f.a)(e,[{key:"signIn",value:function(){var e=Object(_.a)(k.a.mark((function e(t){var c,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof v){e.next=2;break}throw new Error("FetchClient.signIn method only works with an instance of the User class");case 2:return e.next=4,fetch("".concat(this.url,"/signin"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:'{ "username" : "'.concat(t.name,'" }')});case 4:return c=e.sent,e.next=7,c.json();case 7:n=e.sent,t.avatar=n.avatar,t.token=n.token;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllBooks",value:function(){var e=Object(_.a)(k.a.mark((function e(t){var c,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.url,"/books"),{headers:{Authorization:"Bearer ".concat(t)}});case 2:return c=e.sent,e.next=5,c.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBookById",value:function(){var e=Object(_.a)(k.a.mark((function e(t,c){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.url,"/books/").concat(c),{headers:{Authorization:"Bearer ".concat(t)}});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,c){return e.apply(this,arguments)}}()},{key:"buyBooks",value:function(){var e=Object(_.a)(k.a.mark((function e(t,c){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.url,"/purchase"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json;charset=utf-8"},body:'{ "books" : "'.concat(c,'" }')});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,c){return e.apply(this,arguments)}}()}]),e}());var y=function(){var e=Object(n.useState)(""),t=Object(x.a)(e,2),c=t[0],r=t[1],s=Object(n.useRef)(null);return Object(n.useEffect)((function(){s.current.onsubmit=function(e){e.preventDefault();var t=new v(s.userName);N.signIn(t).then((function(){localStorage.setItem("token",t.token),r(t.token)}),(function(e){return console.log(e.message)}))}}),[]),c?Object(u.jsx)(a.a,{to:"/catalog"}):Object(u.jsxs)("div",{className:"wrapper",children:[Object(u.jsx)("img",{src:p,alt:"man"}),Object(u.jsx)("h3",{children:"Js Band Store"}),Object(u.jsxs)("form",{ref:s,children:[Object(u.jsx)("label",{htmlFor:"userName",children:"Name"}),Object(u.jsx)("input",{type:"text",id:"userName"}),Object(u.jsx)("button",{type:"submit",children:"Log In"})]})]})};c(41);var w=function(e){var t=e.img,c=e.title,r=e.author,s=e.price,i=e.key,o=e.id,j=Object(a.g)(),l=Object(n.useRef)(null);return Object(n.useEffect)((function(){l.current.onclick=function(){j.push("/catalog/".concat(o))}}),[]),Object(u.jsxs)("div",{className:"card",children:[Object(u.jsx)("img",{src:t,alt:"img",className:"card__img",height:"180px"}),Object(u.jsx)("p",{className:"card__title",children:c}),Object(u.jsx)("p",{className:"card__author",children:r}),Object(u.jsxs)("div",{className:"card__wrap",children:[Object(u.jsxs)("span",{children:[s,"$"]}),Object(u.jsx)("button",{ref:l,className:"card__btn",type:"button",children:"View"})]})]},i)};c(42),c(43);var B=function(){var e=Object(n.useState)([]),t=Object(x.a)(e,2),c=t[0],r=t[1];return Object(n.useEffect)((function(){N.getAllBooks(localStorage.getItem("token")).then((function(e){r((function(t){return t.concat(e)}))}))})),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"row mgtop-3rem",children:[Object(u.jsx)("div",{className:"search two-thirds column",children:Object(u.jsx)("input",{type:"search",placeholder:"\ue900",className:"icon-magnifying-glass"})}),Object(u.jsx)("div",{className:"filter one-third column",children:Object(u.jsxs)("select",{className:"u-full-width",id:"exampleRecipientInput",children:[Object(u.jsx)("option",{value:"Option 1",children:"Price"}),Object(u.jsx)("option",{value:"Option 2",children:"0...25$"}),Object(u.jsx)("option",{value:"Option 3",children:"25...50$"}),Object(u.jsx)("option",{value:"Option 3",children:"over 50$"})]})})]}),Object(u.jsx)("div",{className:"catalog",children:c.map((function(e){return Object(u.jsx)(w,{id:e.id,img:e.cover,title:e.title,author:e.author,price:e.price},"".concat(e.title).concat(e.id))}))})]})};c(21);var I=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"purchase__btn",children:Object(u.jsx)("button",{className:"button button-primary",type:"button",children:"Purchase"})}),Object(u.jsx)("table",{className:"cart-table",children:Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Name"}),Object(u.jsx)("th",{children:"Count"}),Object(u.jsx)("th",{children:"Price"}),Object(u.jsx)("th",{children:"Total"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"BigBen"}),Object(u.jsx)("td",{children:"10"}),Object(u.jsx)("td",{children:"17"}),Object(u.jsx)("td",{children:"23"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"BigBen"}),Object(u.jsx)("td",{children:"10"}),Object(u.jsx)("td",{children:"17"}),Object(u.jsx)("td",{children:"23"})]})]})}),Object(u.jsx)("div",{className:"total-price",children:Object(u.jsx)("span",{children:"Total Prise: 173$"})})]})};c(44),c.p;c(45);var S=function(){var e=Object(a.h)().id,t=Object(n.useState)({}),c=Object(x.a)(t,2),r=c[0],s=c[1],o=Object(n.useRef)(),j=Object(n.useRef)();return Object(n.useEffect)((function(){N.getBookById(localStorage.getItem("token"),e).then((function(e){console.log(e),s((function(t){return Object(i.a)(Object(i.a)({},t),e)}))}))}),[]),Object(u.jsxs)("div",{className:"book",children:[Object(u.jsxs)("div",{className:"book__wrap",children:[Object(u.jsxs)("div",{className:"book__wrap-image",children:[Object(u.jsx)("div",{children:Object(u.jsx)("img",{src:r.cover,alt:"img",className:"book__image"})}),Object(u.jsx)("div",{className:"book__description",children:r.description})]}),Object(u.jsxs)("div",{className:"book__details",children:[Object(u.jsx)("p",{className:"book__details-title",children:r.title}),Object(u.jsx)("p",{className:"book__details-author",children:r.author}),Object(u.jsx)("p",{className:"book__tags",children:r.tags&&r.tags.map((function(e,t){return Object(u.jsx)("span",{children:e},t)}))})]})]}),Object(u.jsxs)("div",{className:"book__order",children:[Object(u.jsxs)("div",{className:"book__order-price",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Price, $"})}),Object(u.jsx)("span",{children:r.price})]}),Object(u.jsxs)("div",{className:"book__order-count",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Count"})}),Object(u.jsx)("input",{onInput:function(){j.current.textContent=r.price?(r.price*o.current.value).toFixed(2):""},ref:o,type:"number",min:"0",max:"",id:"book-counter",placeholder:"Desired quantity"})]}),Object(u.jsxs)("div",{className:"book__order-total-price",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Total Price, $"})}),Object(u.jsx)("span",{ref:j})]}),Object(u.jsx)("button",{className:"button button-primary",type:"button",children:"Add to Cart"})]})]})};var F=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"404 - Not Found!"}),Object(u.jsx)(s.b,{to:function(){return localStorage.getItem("token")?"/catalog":"/"},children:"Go Home"})]})};var P=function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(a.d,{children:[Object(u.jsx)(O,{path:"/login",component:y}),Object(u.jsx)(a.a,{exact:!0,from:"/",to:"/login"}),Object(u.jsx)(h,{exact:!0,path:"/catalog/:id",component:S}),Object(u.jsx)(h,{path:"/cart",component:I}),Object(u.jsx)(h,{path:"/catalog",component:B}),Object(u.jsx)(a.b,{path:"/not-found",component:F}),Object(u.jsx)(a.a,{from:"*",to:"/not-found"})]})})};c(46);Object(r.render)(Object(u.jsx)(s.a,{basename:"/JS-Band-store",children:Object(u.jsx)(P,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.03835555.chunk.js.map