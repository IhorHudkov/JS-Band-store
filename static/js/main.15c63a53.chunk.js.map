{"version":3,"sources":["redux/types.js","redux/reducers/cartReducer.js","redux/reducers/rootReducer.js","components/images/logo.png","components/images/cart.png","components/Header.jsx","components/Footer.jsx","ProtectedRoute.js","LoginRoute.js","screens/images/man.svg","models/User.js","models/FetchClient.js","screens/Login.jsx","components/Card.jsx","screens/Catalog.jsx","components/PurchaseCompleteModal.jsx","redux/actions.js","screens/images/black-cart.png","screens/EmptyCart.jsx","screens/Cart.jsx","screens/BookDetails.jsx","screens/NotFound.jsx","App.js","index.js"],"names":["ADD_TO_CART","EMPTY_CART","initialState","books","totalPrice","rootReducer","combineReducers","cart","state","action","type","concat","payload","book","Number","Header","button","useRef","history","useHistory","useEffect","current","onclick","localStorage","removeItem","push","className","id","ref","to","src","logo","height","alt","Footer","style","color","href","ProtectedRoute","Component","component","rest","render","props","getItem","pathname","from","location","LoginRoute","User","name","exists","instance","this","_name","_avatar","avatar","_token","token","fetchClient","FetchClient","url","user","a","Error","fetch","method","headers","body","response","json","result","Authorization","ScreensLogin","useState","setToken","form","onsubmit","e","preventDefault","userName","signIn","then","setItem","error","console","log","message","man","htmlFor","Card","img","title","author","price","ScreensCatalog","setBooks","cleanupFunction","getAllBooks","res","prev","placeholder","value","map","i","cover","connect","visible","dispatch","useDispatch","useSelector","store","quantity","toFixed","onClick","btnStyles","background","borderColor","ScreensEmptyCart","disabled","blackCart","modalVisible","setModalVisible","useParams","bookInfo","setBookInfo","countInput","getBookById","description","tags","tag","onInput","textContent","min","max","order","ScreensNotFound","App","path","exact","ScreensBookDetails","ScreensCart","createStore","composeWithDevTools","basename","document","getElementById"],"mappings":"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","file":"static/js/main.15c63a53.chunk.js","sourcesContent":["export const ADD_TO_CART = 'CART/ADD_TO_CART';\r\nexport const EMPTY_CART = 'CART/EMPTY_CART';\r\n","import { ADD_TO_CART, EMPTY_CART } from '../types';\r\n\r\nconst initialState = {\r\n  books: [],\r\n  totalPrice: 0\r\n};\r\n\r\nexport const cartReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_TO_CART:\r\n      return {\r\n        ...state,\r\n        books: state.books.concat(action.payload.book),\r\n        totalPrice: Number(state.totalPrice) + Number(action.payload.totalPrice)\r\n      };\r\n    case EMPTY_CART:\r\n      return { ...initialState };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from 'redux';\r\nimport { cartReducer } from './cartReducer';\r\n\r\nexport const rootReducer = combineReducers({\r\n  cart: cartReducer\r\n});\r\n","export default __webpack_public_path__ + \"static/media/logo.5c2e1559.png\";","export default __webpack_public_path__ + \"static/media/cart.010d5d26.png\";","import React, { useEffect, useRef } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport logo from './images/logo.png';\r\nimport cart from './images/cart.png';\r\nimport './styles/header.scss';\r\n\r\nfunction Header() {\r\n  const button = useRef(null);\r\n  const history = useHistory();\r\n  useEffect(() => {\r\n    button.current.onclick = () => {\r\n      localStorage.removeItem('token');\r\n      history.push('./login');\r\n    };\r\n  }, []);\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"header__top\">\r\n        <div className=\"container\">\r\n          <div className=\"header__top-inner\">\r\n            <span id=\"currentUserName\" />\r\n            <button type=\"button\" ref={button}>\r\n              sign out\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"header__bottom\">\r\n        <div className=\"container\">\r\n          <div className=\"header__bottom-inner\">\r\n            <Link to=\"/catalog\">\r\n              <img src={logo} height=\"80px\" alt=\"logo\" />\r\n            </Link>\r\n            <Link to=\"/cart\">\r\n              <img src={cart} height=\"30px\" alt=\"cart\" />\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport './styles/footer.scss';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p>\r\n        Made with <span style={{ color: '#e25555' }}>&#9829;</span> by\r\n        <a href=\"https://www.linkedin.com/in/igor-gudkov/\"> Ihor Hudkov</a>\r\n      </p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport Header from './components/Header';\r\nimport Footer from './components/Footer';\r\n\r\nfunction ProtectedRoute({ component: Component, ...rest }) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={props => {\r\n        if (localStorage.getItem('token')) {\r\n          return (\r\n            <>\r\n              <Header />\r\n              <main>\r\n                <div className=\"container\">\r\n                  <Component {...props} />\r\n                </div>\r\n              </main>\r\n              <Footer />\r\n            </>\r\n          );\r\n        } else {\r\n          return (\r\n            <Redirect\r\n              to={{\r\n                pathname: '/login',\r\n                state: { from: props.location }\r\n              }}\r\n            />\r\n          );\r\n        }\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","/* eslint-disable consistent-return */\r\nimport React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nfunction LoginRoute({ component: Component, ...rest }) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={props => {\r\n        if (!localStorage.getItem('token')) {\r\n          return <Component {...props} />;\r\n        } else {\r\n          return (\r\n            <Redirect\r\n              to={{ pathname: '/catalog', state: { from: props.location } }}\r\n            />\r\n          );\r\n        }\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\nexport default LoginRoute;\r\n","export default __webpack_public_path__ + \"static/media/man.ad811078.svg\";","export default class User {\r\n  constructor(name) {\r\n    if (User.exists) return User.instance;\r\n    User.instance = this;\r\n    User.exists = true;\r\n    this._name = name;\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  get avatar() {\r\n    return this._avatar;\r\n  }\r\n\r\n  set avatar(avatar) {\r\n    this._avatar = avatar;\r\n  }\r\n\r\n  get token() {\r\n    return this._token;\r\n  }\r\n\r\n  set token(token) {\r\n    this._token = token;\r\n  }\r\n}\r\n","import User from './User';\r\n\r\nclass FetchClient {\r\n  constructor() {\r\n    if (FetchClient.exists) return FetchClient.instance;\r\n    FetchClient.exists = true;\r\n    FetchClient.instance = this;\r\n    this.url = 'https://js-band-store-api.glitch.me';\r\n  }\r\n\r\n  async signIn(user) {\r\n    if (!(user instanceof User)) {\r\n      throw new Error(\r\n        'FetchClient.signIn method only works with an instance of the User class'\r\n      );\r\n    }\r\n    const response = await fetch(`${this.url}/signin`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json;charset=utf-8'\r\n      },\r\n      body: `{ \\\"username\\\" : \\\"${user.name}\\\" }`\r\n    });\r\n    const result = await response.json();\r\n    user.avatar = result.avatar;\r\n    user.token = result.token;\r\n  }\r\n\r\n  async getAllBooks(token) {\r\n    const response = await fetch(`${this.url}/books`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    });\r\n    const result = await response.json();\r\n    return result;\r\n  }\r\n\r\n  async getBookById(token, id) {\r\n    const response = await fetch(`${this.url}/books/${id}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    });\r\n    const result = await response.json();\r\n    return result;\r\n  }\r\n\r\n  async buyBooks(token, books) {\r\n    const response = await fetch(`${this.url}/purchase`, {\r\n      method: 'POST',\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'application/json;charset=utf-8'\r\n      },\r\n      body: `{ \\\"books\\\" : \\\"${books}\\\" }`\r\n    });\r\n    const result = await response.json();\r\n    return result;\r\n  }\r\n}\r\n\r\nconst fetchClient = new FetchClient();\r\n\r\nexport default fetchClient;\r\n","import { React, useEffect, useRef, useState } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport './styles/login.scss';\r\nimport man from './images/man.svg';\r\nimport User from '../models/User';\r\nimport fetchClient from '../models/FetchClient';\r\n\r\nfunction ScreensLogin() {\r\n  const [token, setToken] = useState('');\r\n  const form = useRef(null);\r\n  useEffect(() => {\r\n    form.current.onsubmit = e => {\r\n      e.preventDefault();\r\n      const user = new User(form.userName);\r\n      fetchClient.signIn(user).then(\r\n        () => {\r\n          localStorage.setItem('token', user.token);\r\n          setToken(user.token);\r\n          // Cliconsole.log('LocalStorage', localStorage.getItem('token'));\r\n          // fetchClient.getAllBooks(user.token).then(res => console.log(res));\r\n          // fetchClient.getBookById(user.token, 1).then(res => console.log(res));\r\n          // fetchent.buyBooks(user.token, 1).then(res => console.log(res));\r\n        },\r\n        error => console.log(error.message)\r\n      );\r\n    };\r\n  }, []);\r\n\r\n  if (token) {\r\n    return <Redirect to=\"/catalog\" />;\r\n  }\r\n  return (\r\n    <div className=\"wrapper\">\r\n      <img src={man} alt=\"man\" />\r\n      <h3>Js Band Store</h3>\r\n      <form ref={form}>\r\n        <label htmlFor=\"userName\">Name</label>\r\n        <input type=\"text\" id=\"userName\" />\r\n        <button type=\"submit\">Log In</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ScreensLogin;\r\n","import React, { useEffect, useRef } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport './styles/card.scss';\r\n\r\nfunction Card({ img, title, author, price, id }) {\r\n  const history = useHistory();\r\n  const button = useRef(null);\r\n  useEffect(() => {\r\n    button.current.onclick = () => {\r\n      history.push(`/catalog/${id}`);\r\n    };\r\n  }, []);\r\n  return (\r\n    <div className=\"card\">\r\n      <img src={img} alt=\"img\" className=\"card__img\" height=\"180px\" />\r\n      <p className=\"card__title\">{title}</p>\r\n      <p className=\"card__author\">{author}</p>\r\n      <div className=\"card__wrap\">\r\n        <span>{price}$</span>\r\n        <button ref={button} className=\"card__btn\" type=\"button\">\r\n          View\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","/* eslint-disable no-return-assign */\r\nimport React, { useEffect, useState } from 'react';\r\nimport fetchClient from '../models/FetchClient';\r\nimport Card from '../components/Card';\r\nimport './styles/icomoon.css';\r\nimport './styles/catalog.scss';\r\n\r\nfunction ScreensCatalog() {\r\n  const [books, setBooks] = useState([]);\r\n\r\n  useEffect(async () => {\r\n    let cleanupFunction = false;\r\n    try {\r\n      const res = await fetchClient.getAllBooks(localStorage.getItem('token'));\r\n      if (!cleanupFunction)\r\n        setBooks(prev => {\r\n          return prev.concat(res);\r\n        });\r\n    } catch (e) {\r\n      console.log(e.message);\r\n    }\r\n    return () => (cleanupFunction = true);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"row mgtop-3rem\">\r\n        <div className=\"search two-thirds column\">\r\n          <input\r\n            type=\"search\"\r\n            placeholder=\"&#xe900;\"\r\n            className=\"icon-magnifying-glass\"\r\n          />\r\n        </div>\r\n        <div className=\"filter one-third column\">\r\n          <select className=\"u-full-width\" id=\"exampleRecipientInput\">\r\n            <option value=\"Option 1\">Price</option>\r\n            <option value=\"Option 2\">0...25$</option>\r\n            <option value=\"Option 3\">25...50$</option>\r\n            <option value=\"Option 3\">over 50$</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <div className=\"catalog\">\r\n        {books.map((book, i) => {\r\n          return (\r\n            <Card\r\n              id={book.id}\r\n              img={book.cover}\r\n              title={book.title}\r\n              author={book.author}\r\n              price={book.price}\r\n              key={book.id ? `${i}${book.id}` : i}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ScreensCatalog;\r\n","import React from 'react';\r\nimport { connect, useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { emptyCart } from '../redux/actions';\r\nimport './styles/purchase-complete-modal.scss';\r\n\r\nfunction PurchaseCompleteModal({ visible }) {\r\n  const dispatch = useDispatch();\r\n  const state = useSelector(store => store.cart);\r\n\r\n  const closeLinkClickHandler = () => {\r\n    dispatch(emptyCart());\r\n  };\r\n\r\n  if (visible) {\r\n    return (\r\n      <div className=\"modal\">\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"container\">\r\n            <div className=\"modal-window\">\r\n              <div className=\"modal-window__inner\">\r\n                <table className=\"cart-table\">\r\n                  <tbody>\r\n                    <tr>\r\n                      <th>Name</th>\r\n                      <th>Count</th>\r\n                      <th>Price</th>\r\n                      <th>Total</th>\r\n                    </tr>\r\n                    {state.books.map(book => {\r\n                      return (\r\n                        <tr key={book.id}>\r\n                          <td>{book.title}</td>\r\n                          <td>{book.quantity}</td>\r\n                          <td>{book.price}</td>\r\n                          <td>{(book.quantity * book.price).toFixed(2)}</td>\r\n                        </tr>\r\n                      );\r\n                    })}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              <div className=\"row__total-price\">\r\n                <span>Total Price: 120$</span>\r\n              </div>\r\n              <div className=\"close-btn\">\r\n                <Link to=\"/catalog\" onClick={closeLinkClickHandler}>\r\n                  Close\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  } else {\r\n    return <></>;\r\n  }\r\n}\r\n\r\nexport default connect()(PurchaseCompleteModal);\r\n","import { ADD_TO_CART, EMPTY_CART } from './types';\r\n\r\nexport function addToCart(order) {\r\n  return {\r\n    type: ADD_TO_CART,\r\n    payload: order\r\n  };\r\n}\r\n\r\nexport function emptyCart() {\r\n  return {\r\n    type: EMPTY_CART\r\n  };\r\n}\r\n","export default __webpack_public_path__ + \"static/media/black-cart.e11618bf.png\";","import React from 'react';\r\nimport './styles/empty_cart.scss';\r\nimport blackCart from './images/black-cart.png';\r\n\r\nconst btnStyles = {\r\n  background: '#d1d1d1',\r\n  borderColor: '#d1d1d1'\r\n};\r\n\r\nfunction ScreensEmptyCart() {\r\n  return (\r\n    <>\r\n      <div className=\"purchase__btn\">\r\n        <button\r\n          className=\"button button-primary\"\r\n          type=\"button\"\r\n          disabled\r\n          style={btnStyles}\r\n        >\r\n          Purchase\r\n        </button>\r\n      </div>\r\n      <div className=\"cart-empty\">\r\n        <img src={blackCart} alt=\"img\" />\r\n        <span>\r\n          <b>Cart Empty...</b>\r\n        </span>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ScreensEmptyCart;\r\n","import { React, useState } from 'react';\r\nimport { useSelector, connect } from 'react-redux';\r\nimport PurchaseCompleteModal from '../components/PurchaseCompleteModal';\r\nimport ScreensEmptyCart from './EmptyCart';\r\nimport './styles/cart.scss';\r\n\r\nfunction ScreensCart() {\r\n  const state = useSelector(store => store.cart);\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const purchaseBtnClickHandler = () => {\r\n    setModalVisible(true);\r\n  };\r\n  if (state.totalPrice) {\r\n    return (\r\n      <>\r\n        <div className=\"purchase__btn\">\r\n          <button\r\n            className=\"button button-primary\"\r\n            type=\"button\"\r\n            onClick={purchaseBtnClickHandler}\r\n          >\r\n            Purchase\r\n          </button>\r\n        </div>\r\n        <table className=\"cart-table\">\r\n          <tbody>\r\n            <tr>\r\n              <th>Name</th>\r\n              <th>Count</th>\r\n              <th>Price</th>\r\n              <th>Total</th>\r\n            </tr>\r\n            {state.books.map(book => {\r\n              return (\r\n                <tr key={book.id}>\r\n                  <td>{book.title}</td>\r\n                  <td>{book.quantity}</td>\r\n                  <td>{book.price}</td>\r\n                  <td>{(book.quantity * book.price).toFixed(2)}</td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n        <div className=\"total-price\">\r\n          <span>Total Prise: {state.totalPrice.toFixed(2)}$</span>\r\n        </div>\r\n        <PurchaseCompleteModal visible={modalVisible} />\r\n      </>\r\n    );\r\n  } else {\r\n    return <ScreensEmptyCart />;\r\n  }\r\n}\r\n\r\nexport default connect()(ScreensCart);\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { useDispatch, connect } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\nimport fetchClient from '../models/FetchClient';\r\nimport { addToCart } from '../redux/actions';\r\nimport './styles/book_details.scss';\r\n\r\nfunction ScreensBookDetails() {\r\n  const dispatch = useDispatch();\r\n  const { id } = useParams();\r\n  const [bookInfo, setBookInfo] = useState({});\r\n  const countInput = useRef();\r\n  const totalPrice = useRef();\r\n  useEffect(() => {\r\n    fetchClient.getBookById(localStorage.getItem('token'), id).then(res => {\r\n      console.log(res);\r\n      setBookInfo(prev => ({ ...prev, ...res }));\r\n    });\r\n  }, []);\r\n\r\n  const countInputHandler = () => {\r\n    totalPrice.current.textContent = bookInfo.price\r\n      ? (bookInfo.price * countInput.current.value).toFixed(2)\r\n      : '';\r\n  };\r\n\r\n  const addToCartBtnClickHandler = () => {\r\n    dispatch(\r\n      addToCart({\r\n        book: [\r\n          {\r\n            ...bookInfo,\r\n            quantity: Number(countInput.current.value)\r\n          }\r\n        ],\r\n        totalPrice: (bookInfo.price * countInput.current.value).toFixed(2)\r\n      })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"book\">\r\n      <div className=\"book__wrap\">\r\n        <div className=\"book__wrap-image\">\r\n          <div>\r\n            <img src={bookInfo.cover} alt=\"img\" className=\"book__image\" />\r\n          </div>\r\n          <div className=\"book__description\">{bookInfo.description}</div>\r\n        </div>\r\n        <div className=\"book__details\">\r\n          <p className=\"book__details-title\">{bookInfo.title}</p>\r\n          <p className=\"book__details-author\">{bookInfo.author}</p>\r\n          <p className=\"book__tags\">\r\n            {bookInfo.tags &&\r\n              bookInfo.tags.map((tag, i) => <span key={i}>{tag}</span>)}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div className=\"book__order\">\r\n        <div className=\"book__order-price\">\r\n          <p>\r\n            <b>Price, $</b>\r\n          </p>\r\n          <span>{bookInfo.price}</span>\r\n        </div>\r\n        <div className=\"book__order-count\">\r\n          <p>\r\n            <b>Count</b>\r\n          </p>\r\n          <input\r\n            onInput={countInputHandler}\r\n            ref={countInput}\r\n            type=\"number\"\r\n            min=\"0\"\r\n            max=\"\"\r\n            id=\"book-counter\"\r\n            placeholder=\"Desired quantity\"\r\n          />\r\n        </div>\r\n        <div className=\"book__order-total-price\">\r\n          <p>\r\n            <b>Total Price, $</b>\r\n          </p>\r\n          <span ref={totalPrice} />\r\n        </div>\r\n        <button\r\n          className=\"button button-primary\"\r\n          type=\"button\"\r\n          onClick={addToCartBtnClickHandler}\r\n        >\r\n          Add to Cart\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect()(ScreensBookDetails);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction ScreensNotFound() {\r\n  return (\r\n    <div>\r\n      <h1>404 - Not Found!</h1>\r\n      <Link\r\n        to={() => {\r\n          if (localStorage.getItem('token')) {\r\n            return '/catalog';\r\n          } else {\r\n            return '/';\r\n          }\r\n        }}\r\n      >\r\n        Go Home\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ScreensNotFound;\r\n","import React from 'react';\r\nimport { Redirect, Route, Switch } from 'react-router-dom';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport LoginRoute from './LoginRoute';\r\nimport {\r\n  ScreensNotFound,\r\n  ScreensLogin,\r\n  ScreensCatalog,\r\n  ScreensCart,\r\n  ScreensBookDetails\r\n} from './screens';\r\n\r\nfunction App() {\r\n  return (\r\n    <>\r\n      <Switch>\r\n        <LoginRoute path=\"/login\" component={ScreensLogin} />\r\n        <Redirect exact from=\"/\" to=\"/login\" />\r\n        <ProtectedRoute\r\n          exact\r\n          path=\"/catalog/:id\"\r\n          component={ScreensBookDetails}\r\n        />\r\n        <ProtectedRoute path=\"/cart\" component={ScreensCart} />\r\n        <ProtectedRoute path=\"/catalog\" component={ScreensCatalog} />\r\n        <Route path=\"/not-found\" component={ScreensNotFound} />\r\n        <Redirect from=\"*\" to=\"/not-found\" />\r\n      </Switch>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport { render } from 'react-dom';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport { createStore } from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport { Provider } from 'react-redux';\r\nimport { rootReducer } from './redux/reducers/rootReducer';\r\nimport App from './App';\r\nimport './index.css';\r\n\r\nconst store = createStore(rootReducer, composeWithDevTools());\r\n\r\nrender(\r\n  <Provider store={store}>\r\n    <Router basename=\"/JS-Band-store\">\r\n      <App />\r\n    </Router>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}